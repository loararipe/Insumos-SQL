
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valorcafe Logistics</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; background-color: #f8fafc; margin: 0; overflow-x: hidden; }
    #loading-screen {
      position: fixed; inset: 0; background: white; z-index: 9999;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      transition: opacity 0.5s ease;
    }
    .spinner {
      width: 50px; height: 50px; border: 5px solid #f3f3f3;
      border-top: 5px solid #F9A11B; border-radius: 50%;
      animation: spin 1s linear infinite; margin-bottom: 1.5rem;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .loading-text { font-weight: 800; color: #3D231A; font-size: 14px; letter-spacing: 0.2em; text-transform: uppercase; }
  </style>

  <script>
    window.process = { 
      env: { 
        API_KEY: "", 
        SUPABASE_URL: "https://wdrahgqwdhhokipzoqzp.supabase.co", 
        SUPABASE_ANON_KEY: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndkcmFoZ3F3ZGhob2tpcHpvcXpwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczMjM1OTQsImV4cCI6MjA4Mjg5OTU5NH0.NiANX7ZWUJLP6QnMJ4m0OBCnwR0Ljbr5iRVeCEaTM18" 
      } 
    };
  </script>

  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@19.0.0?dev",
    "react-dom": "https://esm.sh/react-dom@19.0.0?dev",
    "react-dom/client": "https://esm.sh/react-dom@19.0.0/client?dev",
    "@google/genai": "https://esm.sh/@google/genai@1.34.0",
    "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@2.45.1",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
<body>
  <div id="loading-screen">
    <div class="spinner"></div>
    <div class="loading-text">ValorCaf√© Cloud</div>
    <div id="status-log" style="margin-top: 20px; font-size: 10px; color: #94a3b8; font-family: monospace;">Aguardando...</div>
  </div>
  <div id="root"></div>

  <script type="text/babel">
    const FILES = ['App.tsx', 'index.tsx'];
    const blobUrls = {};

    async function bootstrap() {
      const logEl = document.getElementById('status-log');
      try {
        for (const file of FILES) {
          if (logEl) logEl.innerText = `Carregando ${file}...`;
          const res = await fetch('./' + file);
          if (!res.ok) throw new Error(`Falha ao ler ${file}`);
          const code = await res.text();
          
          const transformed = Babel.transform(code, {
            presets: [['react', { runtime: 'automatic' }], ['typescript', { isTSX: true, allExtensions: true }]],
            filename: file,
            plugins: [
              ({ types: t }) => ({
                visitor: {
                  ImportDeclaration(path) {
                    if (path.node.source.value.startsWith('.')) {
                      const parts = path.node.source.value.split('/');
                      const name = parts[parts.length - 1].replace('.tsx', '').replace('.ts', '') + '.tsx';
                      if (blobUrls['./' + name]) path.node.source.value = blobUrls['./' + name];
                    }
                  }
                }
              })
            ]
          }).code;
          const blob = new Blob([transformed], { type: 'application/javascript' });
          blobUrls['./' + file] = URL.createObjectURL(blob);
        }

        const entry = document.createElement('script');
        entry.type = 'module';
        entry.src = blobUrls['./index.tsx'];
        document.body.appendChild(entry);

        setTimeout(() => {
          const loader = document.getElementById('loading-screen');
          if (loader) loader.style.display = 'none';
        }, 1000);
      } catch (err) {
        if (logEl) logEl.innerHTML = `<span style="color:red">Erro: ${err.message}</span>`;
      }
    }
    bootstrap();
  </script>
</body>
</html>
